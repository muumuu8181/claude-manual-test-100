# 評価ガイドライン詳細

## 1. 配点調整の具体的基準

### 配点調整が必要なケース
```
基本配点（標準課題: 難易度10-15）:
- フォルダ/ファイル作成: 25点
- 処理結果の正確性: 35点
- 追加要件: 20点
- ルール遵守: 20点

難易度による調整:
- 難易度5-10: 基本作業35点、処理結果40点、追加要件5点、ルール20点
- 難易度15-20: 基本作業20点、処理結果35点、追加要件25点、ルール20点
- 難易度20-25: 基本作業15点、処理結果35点、追加要件30点、ルール20点
```

### 部分点の具体例
```
計算問題（7点満点の場合）:
- 完全正解: 7点
- 計算過程は正しいが丸め誤差: 6点
- 計算式は正しいが計算ミス: 4点
- 計算式が間違っている: 2点
- 未実装: 0点

ファイル作成（5点満点の場合）:
- 完璧に作成: 5点
- 名前に軽微なtypo（file_1→file1）: 4点
- 配置場所が違う: 3点
- ファイルはあるが空: 2点
- ファイルなし: 0点
```

## 2. 必須動作検証プロセス【2025年8月13日 重要改訂】

### 新配点構成（100点満点）- test6の教訓に基づく改訂
```
- 基本要件: 20点
  - フォルダ構造: 5点
  - ファイル存在: 5点
  - ファイル形式: 5点
  - 命名規則: 5点

- 動作検証: 40点【最重要項目】
  - 構文エラーなし: 10点
  - 実行可能: 10点
  - 期待動作: 10点
  - エラーハンドリング: 10点

- 計算精度: 20点
  - 数値正確性: 10点
  - アルゴリズム正当性: 10点

- 品質: 20点
  - コード可読性: 5点
  - ドキュメント: 5点
  - テスト可能性: 5点
  - 保守性: 5点
```

### 必須チェックリストの確認と記録
**重要**: 評価開始時、必ず以下を実施し、work_history.logに記録すること

```bash
# work_history.logへの記録例
[評価者名] $(date '+%Y%m%d %H:%M:%S') 必須評価チェックリスト確認開始
[評価者名] $(date '+%Y%m%d %H:%M:%S') evaluation_checklist_mandatory.md を参照
[評価者名] $(date '+%Y%m%d %H:%M:%S') チェックリスト項目1-10を確認完了
```

### 動作検証の必須手順
```bash
# Step1: 全Pythonファイルの構文チェック（必須）
find . -name "*.py" -exec python3 -m py_compile {} \; 2>&1
# work_history.logに記録: 構文チェック実施、エラー数X件

# Step2: 各スクリプトの実行テスト（必須）
for script in $(find . -name "*.py"); do
    echo "Testing: $script"
    timeout 10 python3 "$script" 2>&1 | head -20
    echo "Exit code: $?"
done
# work_history.logに記録: 実行テスト完了、成功X件、失敗Y件
```

### エラー時の採点基準（厳格化）
```
- SyntaxError: -10点以上の大幅減点
- ImportError: -5点（ただし標準ライブラリの場合-8点）
- 実行時エラー: -5点〜-10点（影響範囲による）
- 動作しないスクリプト: 該当項目0点
```

### 重要原則
- **「ファイルが存在する」≠「動作する」**
- 表面的な確認での評価は禁止
- 動作確認なしでの高得点付与は厳禁

### 評価レポートへの記載例
```markdown
### 5. 検証スクリプト作成: **12/15点**
- ✅ verification.pyが作成されている（5/5点）
- ⚠️ ImportError発生 - mathライブラリ未インポート（4/5点）
- ✅ エラーを修正後、正しく動作することを確認（3/5点）
```

## 2.5 reflection.txtの評価基準

### 高評価のreflection.txt（5/5点）
- エラーの有無が明確に記載されている
- エラーがあった場合、具体的な内容と解決方法が記載
- 指示の不明確な点を具体的に指摘
- 実作業の困難さを正直に記載

### 部分点のreflection.txt（3-4/5点）
- エラー記録があるが詳細不足
- 工夫点は記載されているが、問題点の記載が不足
- 改善案が抽象的

### 低評価のreflection.txt（1-2/5点）
- 文字化けで読めない
- エラーの有無が不明
- 単に「問題なし」「順調」のみの記載

## 3. 文字化け問題の判断基準

### 減点なし（0点）
- ファイルは存在し、文字化けしているが作業は完了している
- タイムスタンプやキー情報が読み取れる
- システム側のエンコーディング問題の可能性

### 軽微な減点（-1点）
- 重要な情報が部分的に読めない
- しかし作業内容は推測可能

### 減点（-2点以上）
- 完全に読めず、内容が不明
- 明らかに作業者側の実装ミス

### 記載例
```markdown
⚠️ reflection.txtに文字化け（-1点）
- エンコーディングの問題と思われる
- [テストAI2]のプレフィックスは確認可能
- 内容の記載意図は確認できる
```

## 4. next_prompt.txt作成の具体例

### Level 1→2（難易度10→15）
```text
【作業指示】
1) 3つのフォルダを作成... → 5つのフォルダを作成...
2) 各フォルダに1ファイル... → 各フォルダに2ファイル...
3) 基本的な四則演算... → 累乗や平方根を含む計算...
4) （新規追加）CSVファイルでまとめる
```

### Level 2→3（難易度15→20）
```text
【作業指示】
1) 5つのフォルダ... → 7つのフォルダ...
2) txtファイル... → txtとJSONファイル混在...
3) 単純な計算... → 条件分岐を含む計算...
4) CSVまとめ... → JSONで階層的にまとめる...
5) （新規追加）検証スクリプトの作成
```

### Level 3→4（難易度20→25）
```text
【作業指示】
1) フラットな構造... → 階層構造のフォルダ...
2) 静的なファイル... → 動的に生成されるファイル...
3) 個別の計算... → 相互依存する計算...
4) 単純な検証... → エラーハンドリングを含む検証...
5) （新規追加）実行ログの自動生成
```

## 5. 判断に迷った場合の原則

### 基本方針
1. **疑わしきは受験者の利益に** - 判断に迷ったら減点しない
2. **部分点を積極的に** - 0か満点ではなく、努力を評価
3. **記録を詳細に** - なぜその点数にしたか明記
4. **改善提案を具体的に** - 次回どうすれば満点になるか

### エスカレーション
判断に迷う場合は評価レポートに以下を記載:
```markdown
### 評価者注記
- [項目名]について判断に迷いました
- 理由: [具体的な状況]
- 採用した判断: [点数と根拠]
- 代替案: [別の解釈の可能性]
```

## 6. よくある質問（FAQ）

**Q: 作業者が独自の改善を加えた場合は？**
A: 要件を満たした上での改善は加点対象（最大+5点のボーナス）

**Q: 明らかに課題を誤解している場合は？**
A: 誤解した部分のみ減点し、正しく実装された部分は評価

**Q: 時間がかかりすぎている場合は？**
A: 時間は採点対象外（ただし効率性として記載は可能）

**Q: typoやスペルミスは？**
A: 動作に影響しない限り-1点以内

**Q: コメントやドキュメントが丁寧な場合は？**
A: ボーナス点として+1〜3点の追加可能